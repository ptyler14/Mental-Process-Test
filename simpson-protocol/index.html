<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simpson Protocol Session</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Merriweather:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <header>
            <a href="../index.html" class="home-link">üè† Exit</a>
        </header>

        <div id="mode-select-screen" class="screen">
            <h1>The Simpson Protocol</h1>
            <p class="subtitle">Select Session Mode</p>
            
            <div class="mode-cards">
                <div class="mode-card" id="mode-solo">
                    <h3>Solo Session</h3>
                    <p>I am alone. The app will guide me with audio.</p>
                </div>
                <div class="mode-card" id="mode-partner">
                    <h3>Partner Session</h3>
                    <p>A friend will read the script to me.</p>
                </div>
            </div>
        </div>

        <div id="solo-start-screen" class="screen hidden">
            <h2>Solo Session</h2>
            <div class="instructions">
                <p>This session uses <strong>Key Presses</strong> for Yes/No and <strong>Voice</strong> for numbers.</p>
                <p>Please find a place where you can lie down comfortably with your hand resting on your keyboard.</p>
            </div>
            <button id="solo-begin-btn" class="primary-btn">Begin Setup</button>
        </div>
        
        <div id="partner-start-screen" class="screen hidden">
            <h2>Partner Session</h2>
            <div class="instructions">
                <p><strong>Instructions for the Partner:</strong></p>
                <ul>
                    <li>You will act as the Hypnotist.</li>
                    <li>Read the script on the screen to the client slowly and calmly.</li>
                    <li>When the client responds (with a finger signal or voice), click the corresponding button on the screen.</li>
                </ul>
            </div>
            <button id="partner-begin-btn" class="primary-btn">Start Session</button>
        </div>

        <div id="confirm-keys-screen" class="screen hidden">
            <h2>Welcome Back</h2>
            <p>Last time, you used these keys:</p>
            <div class="key-display">
                <p>YES: <span id="saved-yes-key" class="key">Space</span></p>
                <p>NO: <span id="saved-no-key" class="key">N</span></p>
            </div>
            <div class="button-row">
                <button id="change-keys-btn" class="secondary-btn">Change Keys</button>
                <button id="keep-keys-btn" class="primary-btn">Use These Keys</button>
            </div>
        </div>

        <div id="practice-screen" class="screen hidden">
            <div class="status-indicator">
                <div id="visual-indicator" class="pulse-circle"></div>
                <p id="status-text">Calibrating...</p>
            </div>
            <div id="feedback-log" class="log-area"></div>
            <button id="mic-activate-btn" class="primary-btn hidden">Tap to Enable Mic</button>
        </div>

        <div id="session-screen" class="screen hidden">
            
            <div id="solo-view" class="hidden">
                <div class="pulse-circle" id="session-indicator"></div>
                <p id="session-status" class="status-text">...</p>
            </div>

            <div id="partner-view" class="hidden">
                <div class="script-box">
                    <p class="script-label">READ THIS TO CLIENT:</p>
                    <p id="partner-script-text" class="teleprompter">...</p>
                </div>
                
                <div id="partner-controls" class="partner-controls hidden">
                    <p class="control-label">Waiting for client response...</p>
                    <div class="button-row">
                        <button id="partner-yes-btn" class="control-btn yes">Client Signaled YES</button>
                        <button id="partner-no-btn" class="control-btn no">Client Signaled NO</button>
                    </div>
                    <div id="partner-suds-input" class="hidden" style="margin-top: 20px;">
                        <input type="number" id="partner-suds-val" placeholder="Score (-10 to 10)">
                        <button id="partner-suds-btn" class="primary-btn">Submit Score</button>
                    </div>
                     <button id="partner-next-btn" class="primary-btn hidden" style="margin-top: 20px;">Next Step</button>
                </div>
            </div>

        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>
